# agent2.py (inside your chat route after calling Agent3)
agent3_base = _agent3_base()  # you already have this helper
audio_path, audio_bytes = await _extract_audio_from_agent3_response(
    data, agent3_base, settings.AGENT_TIMEOUT
)

resp = {
    "response": text_out,               # whatever Agent 2 generated
    "session_id": session_id,
    "status": "success",
    "audio_path": audio_path,
    "audio_hex": audio_bytes.hex() if audio_bytes else None,
    # ...
}
